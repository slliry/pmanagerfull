{"version":3,"file":"js/371.038c5e09.js","mappings":"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","sources":["webpack://web_pm/./src/components/MobileLanding.vue","webpack://web_pm/./src/components/MobileLanding.vue?07ab"],"sourcesContent":["<template>\r\n  <div class=\"mobile-landing\">\r\n    <!-- Форма входа -->\r\n    <section class=\"login-section\">\r\n      <div class=\"login-container\">\r\n        <h1 class=\"form-title\">Project Manager</h1>\r\n        <form @submit.prevent=\"submitLoginForm\">\r\n          <div class=\"email-input-group\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Введите email\"\r\n              v-model=\"loginFormData.emailPrefix\"\r\n              required\r\n              class=\"email-prefix\"\r\n            />\r\n            <div class=\"email-domain-select\">\r\n              <div class=\"selected-domain\" @click=\"toggleDomainList\">\r\n                {{ loginFormData.selectedDomain }}\r\n                <span class=\"arrow-down\">▼</span>\r\n              </div>\r\n              <div class=\"domain-list\" v-if=\"showDomainList\">\r\n                <div\r\n                  v-for=\"domain in emailDomains\"\r\n                  :key=\"domain\"\r\n                  class=\"domain-option\"\r\n                  @click=\"selectDomain(domain)\"\r\n                >\r\n                  {{ domain }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            v-model=\"loginFormData.password\"\r\n            required\r\n            class=\"form-input\"\r\n          />\r\n          <button type=\"submit\" class=\"login-button\">\r\n            Войти\r\n          </button>\r\n          <div class=\"register-prompt\">\r\n            <p>Нет аккаунта?</p>\r\n            <button @click=\"toggleModal('register')\" class=\"register-link\">\r\n              Зарегистрироваться\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Модальное окно регистрации -->\r\n    <CustomModal\r\n      :isVisible=\"showRegisterModal\"\r\n      @close=\"showRegisterModal = false\"\r\n      type=\"register\"\r\n    />\r\n\r\n    <footer class=\"mobile-footer\">\r\n      <div class=\"mobile-footer-content\">\r\n        <p>Copyright &copy; 2024 Project Manager</p>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport CustomModal from \"./CustomModal.vue\";\r\n\r\nexport default {\r\n  name: 'MobileLanding',\r\n  components: {\r\n    CustomModal,\r\n  },\r\n  data() {\r\n    return {\r\n      showDomainList: false,\r\n      loginFormData: {\r\n        emailPrefix: \"\",\r\n        selectedDomain: \"@gmail.com\",\r\n        password: \"\",\r\n      },\r\n      emailDomains: [\r\n        \"@gmail.com\",\r\n        \"@mail.ru\",\r\n        \"@yandex.ru\",\r\n        \"@outlook.com\",\r\n        \"@yahoo.com\",\r\n        \"@icloud.com\",\r\n      ],\r\n      errors: [],\r\n      showRegisterModal: false\r\n    };\r\n  },\r\n  methods: {\r\n    toggleDomainList() {\r\n      this.showDomainList = !this.showDomainList;\r\n    },\r\n    selectDomain(domain) {\r\n      this.loginFormData.selectedDomain = domain;\r\n      this.showDomainList = false;\r\n    },\r\n    async submitLoginForm() {\r\n      this.errors = [];\r\n\r\n      const fullEmail = this.loginFormData.emailPrefix + this.loginFormData.selectedDomain;\r\n\r\n      if (!this.loginFormData.emailPrefix) {\r\n        this.errors.push(\"Введите email.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const loginResponse = await axios.post(\r\n          \"api/accounts/login/\",\r\n          {\r\n            email: fullEmail,\r\n            password: this.loginFormData.password,\r\n          }\r\n        );\r\n\r\n        const { access: accessToken, refresh: refreshToken, profile_type, profile_complete } = loginResponse.data;\r\n\r\n        if (accessToken && refreshToken) {\r\n          localStorage.setItem(\"accessToken\", accessToken);\r\n          localStorage.setItem(\"refreshToken\", refreshToken);\r\n          localStorage.setItem(\"profileType\", profile_type);\r\n          localStorage.setItem(\"profileComplete\", profile_complete);\r\n\r\n          // Перенаправление на /dashboard если профиль заполнен, иначе на /authentication\r\n          if (profile_complete === true) {\r\n            this.$router.push(\"/dashboard\");\r\n          } else {\r\n            this.$router.push(\"/authentication\");\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Ошибка входа:\", error);\r\n        \r\n        if (error.response) {\r\n          if (error.response.status === 401) {\r\n            this.errors.push(\"Неверный email или пароль\");\r\n          } else if (error.response.data?.detail) {\r\n            this.errors.push(error.response.data.detail);\r\n          }\r\n        } else if (error.request) {\r\n          this.errors.push(\"Сервер недоступен. Попробуйте позже.\");\r\n        } else {\r\n          this.errors.push(`Ошибка: ${error.message}`);\r\n        }\r\n      }\r\n    },\r\n    toggleModal(type) {\r\n      if (type === 'register') {\r\n        this.showRegisterModal = !this.showRegisterModal;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Основные стили */\r\n.mobile-landing {\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: white;\r\n}\r\n\r\n/* Стили формы входа */\r\n.login-section {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n}\r\n\r\n.login-container {\r\n  width: 100%;\r\n  max-width: 400px;\r\n  background: white;\r\n  padding: 30px;\r\n  border-radius: 16px;\r\n}\r\n\r\n.form-title {\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-bottom: 30px;\r\n  font-size: 28px;\r\n}\r\n\r\n.email-input-group {\r\n  display: flex;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.email-prefix {\r\n  flex: 1;\r\n  padding: 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px 0 0 8px;\r\n  font-size: 16px;\r\n}\r\n\r\n.email-domain-select {\r\n  position: relative;\r\n  width: 140px;\r\n}\r\n\r\n.selected-domain {\r\n  padding: 12px;\r\n  background: white;\r\n  border: 1px solid #ddd;\r\n  border-left: none;\r\n  border-radius: 0 8px 8px 0;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.domain-list {\r\n  position: absolute;\r\n  top: 100%;\r\n  left: 0;\r\n  right: 0;\r\n  background: white;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  margin-top: 4px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n  z-index: 10;\r\n}\r\n\r\n.domain-option {\r\n  padding: 12px;\r\n  cursor: pointer;\r\n}\r\n\r\n.domain-option:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.form-input {\r\n  width: calc(100% - 25px);\r\n  padding: 12px;\r\n  margin-bottom: 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n}\r\n\r\n.login-button {\r\n  width: 100%;\r\n  padding: 14px;\r\n  background: #539bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  margin-bottom: 20px;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.login-button:hover {\r\n  background: #4188f4;\r\n}\r\n\r\n.register-prompt {\r\n  text-align: center;\r\n}\r\n\r\n.register-prompt p {\r\n  margin-bottom: 10px;\r\n  color: #666;\r\n}\r\n\r\n.register-link {\r\n  background: none;\r\n  border: none;\r\n  color: #539bff;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  padding: 0;\r\n}\r\n\r\n.register-link:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.mobile-footer {\r\n  background: #2c3e50;\r\n  color: #bdc3c7;\r\n  padding: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.email-prefix:focus,\r\n.form-input:focus {\r\n  outline: none;\r\n  border-color: #539bff;\r\n}\r\n\r\n.error-message {\r\n  color: #ff4444;\r\n  margin-bottom: 15px;\r\n  font-size: 14px;\r\n}\r\n</style> ","import { render } from \"./MobileLanding.vue?vue&type=template&id=360a2bee&scoped=true\"\nimport script from \"./MobileLanding.vue?vue&type=script&lang=js\"\nexport * from \"./MobileLanding.vue?vue&type=script&lang=js\"\n\nimport \"./MobileLanding.vue?vue&type=style&index=0&id=360a2bee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-360a2bee\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","submitLoginForm","_hoisted_4","type","placeholder","$event","$data","loginFormData","emailPrefix","required","_hoisted_5","onClick","toggleDomainList","_createTextVNode","_toDisplayString","selectedDomain","showDomainList","_hoisted_6","_Fragment","_renderList","emailDomains","domain","selectDomain","_hoisted_7","_createCommentVNode","password","_hoisted_8","toggleModal","_createVNode","_component_CustomModal","isVisible","showRegisterModal","onClose","name","components","CustomModal","data","errors","methods","this","fullEmail","loginResponse","axios","post","email","access","accessToken","refresh","refreshToken","profile_type","profile_complete","localStorage","setItem","$router","push","error","console","response","status","detail","request","message","__exports__","render"],"sourceRoot":""}